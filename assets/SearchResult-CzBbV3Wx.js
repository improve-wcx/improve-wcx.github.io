import{l as X,u as Z,m as M,p as aa,q as ta,v as ea,x as sa,j as w,y as _,k as e,z as la,w as j,A as na,R as L,B as oa,C as ra,D as ua,E as ia,G as pa,H as $,I as T,J as ca,K as ha,L as ma,M as Ea,N as ya,O as ga,P as va,Q as O,S as da,T as D}from"./app-LCtBIzYo.js";const Ba=["/","/intro.html","/demo/","/demo/disable.html","/demo/layout.html","/demo/markdown.html","/demo/page.html","/posts/cherry.html","/posts/dragonfruit.html","/posts/strawberry.html","/posts/tomato.html","/posts/apple/1.html","/posts/apple/2.html","/posts/apple/3.html","/posts/apple/4.html","/posts/banana/1.html","/posts/banana/2.html","/posts/banana/3.html","/posts/banana/4.html","/posts/banana/Dart/40m_Learn_dart.html","/posts/banana/Dart/Dart_logic.html","/posts/banana/Dart/Dart_relation_compute.html","/posts/banana/Dart/control_struct.html","/posts/banana/Dart/dart_bit_compute.html","/posts/banana/Dart/dart_bit_move.html","/posts/banana/Dart/dart_explain.html","/posts/banana/Dart/dart_final_const.html","/posts/banana/Dart/dart_give_value.html","/posts/banana/Dart/dart_key_words.html","/posts/banana/Dart/dart_math_compute.html","/posts/banana/Dart/dart_three_var_compute.html","/posts/banana/Dart/dart_type.html","/posts/banana/Dart/dart_var.html","/posts/banana/devops/k8s%E7%AC%94%E8%AE%B0.html","/posts/banana/devops/k8s%E7%BC%96%E5%86%99yml.html","/posts/banana/devops/nginx%E4%B8%93%E9%A2%98.html","/posts/banana/devops/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E6%95%B4%E7%90%86.html","/posts/banana/golang/GOPROXY.html","/posts/banana/golang/fmt_placeholder.html","/posts/banana/golang/golang100mistakes.html","/posts/banana/golang/golang_env_build.html","/posts/banana/golang/zap_userdefine.html","/posts/banana/gusheshanrenshuo/fun.html","/posts/banana/other/Vue3%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B.html","/posts/banana/other/code2flow.html","/posts/banana/other/common_tool_re.html","/posts/banana/other/git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html","/posts/banana/other/k8s.html","/posts/banana/other/key_action.html","/posts/banana/other/mysql_import_export.html","/posts/banana/other/plantUML.html","/posts/banana/other/project_cmd.html","/posts/banana/other/questions.html","/posts/banana/other/scrcpy.html","/posts/banana/other/virtualbox_androidx86.html","/posts/banana/other/%E6%9C%BA%E8%AF%95%E9%A2%98%E7%9B%AE.html","/posts/banana/prometheus/grafana_prometheus_metrics.html","/posts/banana/python/flask_test_moc.html","/posts/banana/python/gunicornServerHook.html","/posts/banana/python/pb%E7%94%9F%E6%88%90pyi%E6%96%87%E4%BB%B6.html","/posts/banana/python/pythonGeventDemo.html","/posts/banana/python/pythonLinuxIpcMessageQueue.html","/posts/banana/python/python_py_spy.html","/posts/banana/python/python_sysv-ipc_Demo.html","/posts/banana/python/singleton.html","/posts/banana/python/tkinter_gui_demo.html","/posts/banana/python/ubuntu_clang_python.html","/posts/banana/python/%E4%B8%80%E4%B8%AAip%E5%9C%B0%E5%9D%80%E5%90%88%E5%B9%B6%E7%9A%84%E6%A0%B7%E4%BE%8B.html","/posts/banana/python/%E6%A0%87%E5%87%86%E5%BA%93%E4%B9%8Bitertools.html","/posts/banana/scipy/pandas500demo.html","/posts/banana/ubuntu/Flameshot.html","/404.html","/posts/","/posts/apple/","/posts/banana/","/posts/banana/Dart/","/posts/banana/devops/","/posts/banana/golang/","/posts/banana/gusheshanrenshuo/","/posts/banana/other/","/posts/banana/prometheus/","/posts/banana/python/","/posts/banana/scipy/","/posts/banana/ubuntu/","/category/","/category/%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/","/category/%E6%8C%87%E5%8D%97/","/category/%E7%B4%A2%E5%BC%95/","/category/%E7%81%AB%E9%BE%99%E6%9E%9C/","/category/%E6%B0%B4%E6%9E%9C/","/category/%E8%8D%89%E8%8E%93/","/category/%E8%94%AC%E8%8F%9C/","/category/%E8%82%A1%E7%A5%A8/","/category/%E6%96%B0%E8%82%A1/","/category/%E8%B6%85%E7%A0%94%E8%82%A1%E4%BB%BD/","/category/%E6%93%8D%E4%BD%9C/","/category/%E7%BA%A2/","/category/%E7%BC%96%E7%A8%8B/","/category/%E5%9F%BA%E7%A1%80/","/category/linux/","/category/%E8%8B%B9%E6%9E%9C/","/category/%E9%A6%99%E8%95%89/","/category/dart/","/category/devops/","/category/golang/","/category/%E5%A7%91%E5%B0%84%E5%B1%B1%E4%BA%BA%E8%AF%B4/","/category/vue3/","/category/%E5%B7%A5%E5%85%B7/","/category/gpt/","/category/scrcpy/","/category/%E6%8A%95%E5%B1%8F%E5%B7%A5%E5%85%B7/","/category/android/","/category/%E8%99%9A%E6%8B%9F%E6%9C%BA/","/category/%E6%9C%BA%E8%AF%95%E9%A2%98%E7%9B%AE/","/category/prometheus/","/category/granfana/","/category/node-exporter/","/category/flask/","/category/python/","/category/gunicorn/","/category/pandas/","/category/ubuntu/","/category/%E6%88%AA%E5%9B%BE/","/tag/","/tag/%E7%A6%81%E7%94%A8/","/tag/%E5%8A%A0%E5%AF%86/","/tag/%E5%B8%83%E5%B1%80/","/tag/markdown/","/tag/%E9%A1%B5%E9%9D%A2%E9%85%8D%E7%BD%AE/","/tag/%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/","/tag/%E5%9C%86/","/tag/%E7%BA%A2/","/tag/%E5%A4%A7/","/tag/%E5%B0%8F/","/tag/%E7%BB%BF/","/tag/%E9%BB%84/","/tag/%E5%BC%AF%E6%9B%B2%E7%9A%84/","/tag/%E9%95%BF/","/article/","/star/","/timeline/"],ba="SLIMSEARCH_QUERY_HISTORY",g=O(ba,[]),Aa=()=>{const{queryHistoryCount:l}=D;return{enabled:l>0,queryHistories:g,addQueryHistory:r=>{g.value=Array.from(new Set([r,...g.value.slice(0,l-1)]))},removeQueryHistory:r=>{g.value=[...g.value.slice(0,r),...g.value.slice(r+1)]}}},R=l=>Ba[l.id]+("anchor"in l?`#${l.anchor}`:""),_a="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:I}=D,v=O(_a,[]),Da=()=>({enabled:I>0,resultHistories:v,addResultHistory:o=>{{const r={link:R(o),display:o.display};"header"in o&&(r.header=o.header),v.value=[r,...v.value.slice(0,I-1)]}},removeResultHistory:o=>{v.value=[...v.value.slice(0,o),...v.value.slice(o+1)]}}),fa=l=>{const o=ca(),r=M(),f=ha(),u=w(0),d=_(()=>u.value>0),c=ma([]);return Ea(()=>{const{search:C,terminate:m}=ya(),B=ga(E=>{const{resultsFilter:k=s=>s,querySplitter:y,suggestionsFilter:Q,...n}=o.value;E?(u.value+=1,C(E,r.value,n).then(s=>k(s,E,r.value,f.value)).then(s=>{u.value-=1,c.value=s}).catch(s=>{console.warn(s),u.value-=1,u.value||(c.value=[])})):c.value=[]},D.searchDelay-D.suggestDelay,{maxWait:5e3});j([l,r],([E])=>{B(E.join(" "))},{immediate:!0}),va(()=>{m()})}),{isSearching:d,results:c}};var ka=X({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(l,{emit:o}){const r=Z(),f=M(),u=aa(ta),{addQueryHistory:d,queryHistories:c,removeQueryHistory:C}=Aa(),{resultHistories:m,addResultHistory:B,removeResultHistory:E}=Da(),k=ea(l,"queries"),{results:y,isSearching:Q}=fa(k),n=sa({isQuery:!0,index:0}),s=w(0),h=w(0),q=_(()=>c.value.length>0||m.value.length>0),H=_(()=>y.value.length>0),x=_(()=>y.value[s.value]||null),P=()=>{const{isQuery:a,index:t}=n;t===0?(n.isQuery=!a,n.index=a?m.value.length-1:c.value.length-1):n.index=t-1},U=()=>{const{isQuery:a,index:t}=n;t===(a?c.value.length-1:m.value.length-1)?(n.isQuery=!a,n.index=0):n.index=t+1},Y=()=>{s.value=s.value>0?s.value-1:y.value.length-1,h.value=x.value.contents.length-1},G=()=>{s.value=s.value<y.value.length-1?s.value+1:0,h.value=0},z=()=>{h.value<x.value.contents.length-1?h.value+=1:G()},V=()=>{h.value>0?h.value-=1:Y()},F=a=>a.map(t=>da(t)?t:e(t[0],t[1])),J=a=>{if(a.type==="customField"){const t=ia[a.index]||"$content",[i,A=""]=pa(t)?t[f.value].split("$content"):t.split("$content");return a.display.map(p=>e("div",F([i,...p,A])))}return a.display.map(t=>e("div",F(t)))},b=()=>{s.value=0,h.value=0,o("updateQuery",""),o("close")},K=()=>e("ul",{class:"slimsearch-result-list"},e("li",{class:"slimsearch-result-list-item"},[e("div",{class:"slimsearch-result-title"},u.value.queryHistory),c.value.map((a,t)=>e("div",{class:["slimsearch-result-item",{active:n.isQuery&&n.index===t}],onClick:()=>{o("updateQuery",a)}},[e($,{class:"slimsearch-result-type"}),e("div",{class:"slimsearch-result-content"},a),e("button",{class:"slimsearch-remove-icon",innerHTML:T,onClick:i=>{i.preventDefault(),i.stopPropagation(),C(t)}})]))])),N=()=>e("ul",{class:"slimsearch-result-list"},e("li",{class:"slimsearch-result-list-item"},[e("div",{class:"slimsearch-result-title"},u.value.resultHistory),m.value.map((a,t)=>e(L,{to:a.link,class:["slimsearch-result-item",{active:!n.isQuery&&n.index===t}],onClick:()=>{b()}},()=>[e($,{class:"slimsearch-result-type"}),e("div",{class:"slimsearch-result-content"},[a.header?e("div",{class:"content-header"},a.header):null,e("div",a.display.map(i=>F(i)).flat())]),e("button",{class:"slimsearch-remove-icon",innerHTML:T,onClick:i=>{i.preventDefault(),i.stopPropagation(),E(t)}})]))]));return la("keydown",a=>{if(l.isFocusing){if(H.value){if(a.key==="ArrowUp")V();else if(a.key==="ArrowDown")z();else if(a.key==="Enter"){const t=x.value.contents[h.value];d(l.queries.join(" ")),B(t),r.push(R(t)),b()}}else if(a.key==="ArrowUp")P();else if(a.key==="ArrowDown")U();else if(a.key==="Enter"){const{index:t}=n;n.isQuery?(o("updateQuery",c.value[t]),a.preventDefault()):(r.push(m.value[t].link),b())}}}),j([s,h],()=>{var a;(a=document.querySelector(".slimsearch-result-list-item.active .slimsearch-result-item.active"))==null||a.scrollIntoView(!1)},{flush:"post"}),()=>e("div",{class:["slimsearch-result-wrapper",{empty:l.queries.length?!H.value:!q.value}],id:"slimsearch-results"},l.queries.length?Q.value?e(na,{hint:u.value.searching}):H.value?e("ul",{class:"slimsearch-result-list"},y.value.map(({title:a,contents:t},i)=>{const A=s.value===i;return e("li",{class:["slimsearch-result-list-item",{active:A}]},[e("div",{class:"slimsearch-result-title"},a||u.value.defaultTitle),t.map((p,W)=>{const S=A&&h.value===W;return e(L,{to:R(p),class:["slimsearch-result-item",{active:S,"aria-selected":S}],onClick:()=>{d(l.queries.join(" ")),B(p),b()}},()=>[p.type==="text"?null:e(p.type==="title"?oa:p.type==="heading"?ra:ua,{class:"slimsearch-result-type"}),e("div",{class:"slimsearch-result-content"},[p.type==="text"&&p.header?e("div",{class:"content-header"},p.header):null,e("div",J(p))])])})])})):u.value.emptyResult:q.value?[K(),N()]:u.value.emptyHistory)}});export{ka as default};
